{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://mistakia.github.io/react-table/schema/columns/grouped-column-structure.json",
  "title": "GroupedColumnStructure",
  "description": "Structure for grouped columns as generated by group_columns_by_groups and group_columns_into_tree_view utilities",
  "type": "object",
  "properties": {
    "header": {
      "type": ["string", "null"],
      "description": "Display header for the group. Can be a column group ID, parameter label, or null for root group",
      "examples": ["Player Stats", "Team: Lakers", "Year: 2024", null]
    },
    "column_group": {
      "oneOf": [
        { "$ref": "./column-group.json" },
        { "type": "null" }
      ],
      "description": "Column group definition if this is a column_group type grouping"
    },
    "params": {
      "type": ["object", "null"],
      "description": "Parameter-based grouping criteria. Used when columns are grouped by shared parameter values",
      "patternProperties": {
        ".*": {
          "description": "Parameter name and its value for grouping"
        }
      },
      "examples": [
        { "team": "Lakers" },
        { "year": 2024 },
        { "category": ["offense", "defense"] }
      ]
    },
    "columns": {
      "type": "array",
      "items": {
        "oneOf": [
          { "$ref": "./column-definition.json" },
          { "$ref": "#" }
        ]
      },
      "description": "Array of columns or nested groups within this group"
    },
    "column_count": {
      "type": "integer",
      "description": "Total number of leaf columns within this group (used for sorting groups)",
      "minimum": 0
    },
    "locked": {
      "type": "boolean",
      "description": "Internal flag to prevent further columns from being added to this group during the grouping process",
      "default": false
    },
    "id": {
      "type": "string",
      "description": "Unique identifier for the column instance (e.g., 'column_id-index')"
    }
  },
  "required": ["columns"],
  "examples": [
    {
      "header": "Statistics",
      "column_group": {
        "column_group_id": "stats",
        "priority": 1
      },
      "columns": [
        {
          "column_id": "points",
          "header_label": "Points",
          "id": "points-0"
        },
        {
          "column_id": "assists", 
          "header_label": "Assists",
          "id": "assists-1"
        }
      ],
      "column_count": 2
    },
    {
      "header": "Team: Lakers",
      "params": { "team": "Lakers" },
      "column_group": null,
      "columns": [
        {
          "header": "Year: 2024",
          "params": { "year": 2024 },
          "columns": [
            {
              "column_id": "player_name",
              "header_label": "Player",
              "id": "player_name-0"
            }
          ]
        }
      ],
      "locked": false
    }
  ]
}